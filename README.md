# prompt me maybe: AI-Assisted Retro Ray-Casting Engine

A first-person shooter prototype combining classic graphics with generative AI power.

Prompt Me Maybe is a retro-inspired ray-casting engine written in C, powered by MLX42. At its core, it recreates the charm of early FPS games â€” but with a twist: generative AI is used to produce game assets like weapons, textures, and more.

The result is a hybrid workflow: fast, real-time rendering meets creative iteration through AI prompts. This is not just a game demo â€” itâ€™s a proof of concept for AI-assisted game development, and a game-changer for the future of gaming.


---

## Features

- ðŸŽ¨ **AI-Assisted Asset Creation**: Weapons are now generated by open-ai prompt. In future, doors, wall textures, NPC designs or even game play will be produced using prompt-driven workflows â€” empowering rapid prototyping.
-  **Ray-Casting Rendering**: Real-time 3D perspective rendering from a 2D grid map, mimicking early FPS engines.
-  **Minimap**: A top-down live map showing player position and current rays.
-  **Floor & Ceiling Coloring**: User-configurable RGB values in `.cub` files for stylistic flexibility.
-  **Dynamic Doors**: Doors open and close when the player approaches, complete with animated transitions (also AI-generated).
-  **Interactive Sprites**: Support for displaying enemy and item sprites (AI-generated or hand-made).
-  **Animated HUD Hands**: Fully animated weapon hands, generated using AI image models and optimized for sprite-based animation.
-  **Keyboard & Mouse Controls**: Smooth first-person movement, camera rotation, shooting mechanics, and weapon switching.
-  **Custom Map Configuration**: Easily define levels using `.cub` files for layout, textures, and colors.

## Screenshots

![Rotation demo](assets/optimized.gif)

---
## Dependencies

- [MLX42](https://github.com/codam-coding-college/MLX42) (with PNG support)
- C compiler (GCC or Clang)
- `stb_image` & `stb_image_write` (bundled)
- `cJSON` for JSON parsing
- POSIX libraries (`pthread`, `math`, `fcntl`)

---
## API Key Setup

This project uses the OpenAI API for AI-assisted asset generation. You need to provide your own API key to enable this functionality.

### Use an environment variable (recommended)

1. Create an OpenAI key at [https://platform.openai.com/account/api-keys](https://platform.openai.com/account/api-keys).
2. Export it before running/building:
   ```bash
   export CUBAI_API_KEY="sk-..."
   ```
   To make it persistent, add that line to your shell profile (e.g. `~/.zshrc` or `~/.bashrc`) or use a tool like `direnv`.
3. Build/run as usual (`make`, then `./cub3d ...`). The code reads `CUBAI_API_KEY` at runtimeâ€”no source edits needed.

**Keep your API key private and never commit it.**

### Token/quality tip
If you need to reduce output-token usage from image generations, set the image `quality` to `"low"` in `src/movement.c` (search for the image generation JSON). Be aware this can noticeably lower image fidelity. More about image params: https://platform.openai.com/docs/api-reference/images


---
## Building

```
# Clone the repo
git clone https://github.com/aapadill/cub3d.git
cd cub3d

# Build using Make (adjust as needed)
make
```

## Installing Dependencies (macOS/Linux)
Before building, make sure the following libraries are installed:
macOS (with Homebrew)
```
# Install cJSON (for JSON parsing)
brew install cjson

# Install GLFW (required by MLX42)
brew install glfw

# Install libpng (for PNG support)
brew install libpng

# Install curl (if your API uses libcurl to make HTTP requests)
brew install curl

# Optional: If make is missing
xcode-select --install
```
## Linux (Ubuntu/Debian-based)
```
sudo apt update

# Install build essentials
sudo apt install build-essential

# Install dependencies
sudo apt install libcjson-dev libglfw3-dev libpng-dev libcurl4-openssl-dev
```
ðŸ§ª Test tip: If you run into build issues, make sure your compiler supports C99 and that all libraries are correctly linked in the Makefile.


---
## Usage

```bash
./cub3d path/to/map.cub [--strict]
```

- `--strict`: Enforce stricter map closure rules.

### `.cub` File Format

```
NO path/to/north.png
SO path/to/south.png
WE path/to/west.png
EA path/to/east.png
DO path/to/door.png
F 220,100,0      # Floor RGB
C 225,30,0       # Ceiling RGB

1111111
1     1
1  N   1
1  D   1
1111111
```

- `N/S/E/W`: Player start orientation
- `D`: Door tile
- `1`: Wall
- `0` or space: Floor

---
## Controls

| Key / Mouse         | Action                              |
|---------------------|-------------------------------------|
| W / A / S / D       | Move forward/left/back/right        |
| Left / Right Arrows | Rotate camera                       |
| Mouse Drag (Tab)    | Free-look                           |
| Space / Left Click  | Shoot (trigger hand animation)      |
| `2`                 | Change weapon (enter object name)   |
| `0`                 | Talk to NPC (needs to be close)     |
| Esc                 | Quit                                |

---
## Project Structure

```
â”œâ”€â”€ include/          # Headers
â”‚   â””â”€â”€ cub3D.h
â”œâ”€â”€ src/              # Source files
â”‚   â”œâ”€â”€ main.c
â”‚   â”œâ”€â”€ parsing.c
â”‚   â”œâ”€â”€ movement.c
â”‚   â”œâ”€â”€ ray.c
â”‚   â”œâ”€â”€ utils.c       # entry_screen, draw_floor_and_ceiling, etc.
|   â”œâ”€â”€ api.c					# Open ai api call
â”‚   â””â”€â”€ ...
â”œâ”€â”€ textures/         # Default textures & AI-generated hands
â”‚   â”œâ”€â”€ hand/         # Hand sprite frames
â”‚   â””â”€â”€ pics/         # Wall & door PNGs
â”‚   â””â”€â”€ ...
â”œâ”€â”€ map.cub           # Example map file
â”œâ”€â”€ Makefile
â””â”€â”€ README.md
```

---
## Contributing

Feel free to open issues or submit pull requests. Please follow the existing coding style and provide clear commit messages.

---
## License

This project is licensed under the MIT License. See [LICENSE](LICENSE) for details.
